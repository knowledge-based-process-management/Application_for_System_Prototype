<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" href="css/bootstrap-slider.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="bootstrap-slider.min.js"></script>
  <style>
      .field {
      display: inline-block;
  }

  .assess-number {
    margin-bottom:-15px;
  }

     .container {
   width:1120px;
     }
     
     .form-group {
         margin-top:20px;
     }

     .radio-inline {
       padding-left: 5px;
      margin-right: 5px;
     }

     .rating-title {
      width:100%;
      text-align:center;
      font-weight:normal;
     }

     .rating-label-box {
     padding-bottom: 140px;
     margin-top:30px;
     }

     .rating-label-box label{
      font-weight:normal;
     }

     .goal-text {
      font-size: 18px;
      font-weight: bold;
     }

     .impact-critical {
     background-color: red;
     }

     .impact-significant {
     background-color: yellow;
     }

     .impact-moderate {
     background-color: #008000;
     }

     .impact-little-no {
     background-color: #808080;
     }

     .impact-critical-label {
     margin-left:30px;
     }

     .impact-significant-label {
     margin-left:70px;
     }

     .impact-moderate-label {
     margin-left:110px;
     }

     .impact-little-no-label {
     margin-left:150px;
     }

     .risk-little-none {
     background-color: red;
     }

     .risk-weak {
     background-color: yellow;
     }

     .risk-partial {
     background-color: #008000;
     }

     .risk-strong {
     background-color: #00ccff;
     }

     .assessment-rating {
    padding:10px;
    margin:0px;
     }

     .assessment-bar label{
     margin:0px !important;
     border: solid 1px black;
     }

     .assessment-rating input[type=radio] {
     position:relative;
     margin:0px;
     }

     .vertical-text {
  transform: rotate(-90deg);
  transform-origin: left bottom 0;
  display: inline-block;
  margin-top:120px;
  position:absolute;
    }

    .item-assessment-result {
    padding: 12px;
    border: solid 1px black;
    visibility: hidden
    }

    .assessment-result {
    padding: 12px;
    border: solid 1px black;
    }

    .exposure-column {
     text-align: center;
    }

  </style>
</head>
<body>
   
<div class="container">
  <h2>Risk Assessment - Plan and Manage Project</h2>
  <form>
<div class="form-group">
    <div class="table-responsive" style="clear:both">
    <table class="table" style="width:98%">

    <!-- goal 1 -->
     <tr>
    <td colspan="4">
    <p class="goal-text">Goal 1: Concurrent definition of system requirements and solutions</p>
    </td>
    <td style="text-align:center">
    <button id="reset" style="margin-top:5px">Reset</button>
    </td>
     </tr>
     <tr>
    <td colspan="2">
    <label class="radio-inline assess-number" style="padding-left:0px">Critical Success Factor 1.1</label>
    </td>
    <td style="width:20%">
    </td>
    <td style="width:45%">
    <label class="radio-inline">
    Understanding of stakeholder needs: capabilities, operational concept, key performance parameters, enterprise fit (legacy)
    </label>
    </td>
     <td style="width:10%" class="exposure-column">
    <label class="assessment-result" name="assessment_result_1_1">
    0
    </label>
    </td>
    </tr>


     <tr>
    <th style="width:5%">
    <label class="rating-title">Question#</label>
    </th>
    <th style="width:20%">
    <label class="rating-title">Impact</label>
    <div class="rating-label-box">
       <label class="vertical-text impact-critical-label">Critical/40-100%</label>
       <label class="vertical-text impact-significant-label">Significant/20-40%</label>
       <label class="vertical-text impact-moderate-label">Moderate/2-20%</label>
       <label class="vertical-text impact-little-no-label">Little-No impact/0-2%</label>
    </div>
    </th>
    <th style="width:20%">
    <label class="rating-title">Evidence/Risk</label>
    <div class="rating-label-box">
       <label class="vertical-text impact-critical-label">Little-None/p(0.4-1.0)</label>
       <label class="vertical-text impact-significant-label">Weak/p(0.2-0.4)</label>
       <label class="vertical-text impact-moderate-label">Partial/p(0.02-0.2)</label>
       <label class="vertical-text impact-little-no-label">Strong/p(0.0-0.02)</label>
    </div>
    </th>
    <th style="width:45%">
    <label class="rating-title">
     NOTE: Impact and evidence/risk ratings should be done independently. The Impact rating should estimate the effect a failure to address the specified item would have on the program.  It is measured by the item's Impact (Loss), the relative additional % of rework the project will require if it proceeds without improving the lack-of-evidence situation.  The Evidence/Risk rating should specify the quality of evidence that has been provided, which demonstrates that the specified risk item has been satisfactorily addressed.  It is measured by the probability Prob (Loss) that the project will require the indicated % of rework.  The item's Risk Exposure RE is defined as RE = Prob (Loss) * Impact (Loss).
    </label>
    </th>
     <th style="width:10%" class="exposure-column">
    <label class="rating-title">
    Risk Exposure
    </label>
    </th>
    </tr>

    <tr class="assessment-item" name="assessment_1_1_1">
    <td style="width:5%">
    <label>1.1(a)</label>
    </td>
    <td class="assessment-bar" style="width:20%">
    <label class="radio-inline assessment-rating impact-critical">
      <input type="radio" name="assessment_1_1_1_1" value="3">
    </label>
    <label class="radio-inline assessment-rating impact-significant">
      <input type="radio" name="assessment_1_1_1_1" value="2">
    </label>
    <label class="radio-inline assessment-rating impact-moderate">
      <input type="radio" name="assessment_1_1_1_1" value="1">
    </label>
    <label class="radio-inline assessment-rating impact-little-no">
      <input type="radio" name="assessment_1_1_1_1" value="0">
    </label>
    </td>
    <td class="assessment-bar" style="width:20%">
     <label class="radio-inline assessment-rating risk-little-none">
      <input type="radio" name="assessment_1_1_1_2" value="3">
    </label>
    <label class="radio-inline assessment-rating risk-weak">
      <input type="radio" name="assessment_1_1_1_2" value="2">
    </label>
    <label class="radio-inline assessment-rating risk-partial">
      <input type="radio" name="assessment_1_1_1_2" value="1">
    </label>
    <label class="radio-inline assessment-rating risk-strong">
      <input type="radio" name="assessment_1_1_1_2" value="0">
    </label>
    </td>
    <td style="width:45%">
    <label class="radio-inline">
    At Milestone A, have the KPPs been identified in clear, comprehensive, concise terms that are understandable to all stakeholders?
    </label>
    </td>
     <td style="width:10%" class="exposure-column" class="exposure-column">
    <label class="item-assessment-result" name="assessment_result_1_1_1">
    0
    </label>
    </td>
    </tr>

    <tr class="assessment-item" name="assessment_1_1_2">
    <td style="width:5%">
    <label>1.1(b)</label>
    </td>
    <td class="assessment-bar" style="width:20%">
    <label class="radio-inline assessment-rating impact-critical">
      <input type="radio" name="assessment_1_1_2_1" value="3">
    </label>
    <label class="radio-inline assessment-rating impact-significant">
      <input type="radio" name="assessment_1_1_2_1" value="2">
    </label>
    <label class="radio-inline assessment-rating impact-moderate">
      <input type="radio" name="assessment_1_1_2_1" value="1">
    </label>
    <label class="radio-inline assessment-rating impact-little-no">
      <input type="radio" name="assessment_1_1_2_1" value="0">
    </label>
    </td>
    <td class="assessment-bar" style="width:20%">
     <label class="radio-inline assessment-rating risk-little-none">
      <input type="radio" name="assessment_1_1_2_2" value="3">
    </label>
    <label class="radio-inline assessment-rating risk-weak">
      <input type="radio" name="assessment_1_1_2_2" value="2">
    </label>
    <label class="radio-inline assessment-rating risk-partial">
      <input type="radio" name="assessment_1_1_2_2" value="1">
    </label>
    <label class="radio-inline assessment-rating risk-strong">
      <input type="radio" name="assessment_1_1_2_2" value="0">
    </label>
    </td>
    <td style="width:45%">
    <label class="radio-inline">
    Has a CONOPS been developed showing that the system can be operated  to handle both nominal and off-nominal workloads, to meet response time requirements, and generally to meet the defined KPPs?
    </label>
    </td>
     <td style="width:10%" class="exposure-column" class="exposure-column">
    <label class="item-assessment-result" name="assessment_result_1_1_2">
    0
    </label>
    </td>
    </tr>

    <tr class="assessment-item" name="assessment_1_1_3">
    <td style="width:5%">
    <label>1.1(c)</label>
    </td>
    <td class="assessment-bar" style="width:20%">
    <label class="radio-inline assessment-rating impact-critical">
      <input type="radio" name="assessment_1_1_3_1" value="3">
    </label>
    <label class="radio-inline assessment-rating impact-significant">
      <input type="radio" name="assessment_1_1_3_1" value="2">
    </label>
    <label class="radio-inline assessment-rating impact-moderate">
      <input type="radio" name="assessment_1_1_3_1" value="1">
    </label>
    <label class="radio-inline assessment-rating impact-little-no">
      <input type="radio" name="assessment_1_1_3_1" value="0">
    </label>
    </td>
    <td class="assessment-bar" style="width:20%">
     <label class="radio-inline assessment-rating risk-little-none">
      <input type="radio" name="assessment_1_1_3_2" value="3">
    </label>
    <label class="radio-inline assessment-rating risk-weak">
      <input type="radio" name="assessment_1_1_3_2" value="2">
    </label>
    <label class="radio-inline assessment-rating risk-partial">
      <input type="radio" name="assessment_1_1_3_2" value="1">
    </label>
    <label class="radio-inline assessment-rating risk-strong">
      <input type="radio" name="assessment_1_1_3_2" value="0">
    </label>
    </td>
    <td style="width:45%">
    <label class="radio-inline">
    Has the ability of the system to meet mission effectiveness goals been verified through the use of modeling and simulation?
    </label>
    </td>
     <td style="width:10%" class="exposure-column">
    <label class="item-assessment-result" name="assessment_result_1_1_3">
    0
    </label>
    </td>
    </tr>

     <tr class="assessment-item" name="assessment_1_1_4">
    <td style="width:5%">
    <label>1.1(d)</label>
    </td>
    <td class="assessment-bar" style="width:20%">
    <label class="radio-inline assessment-rating impact-critical">
      <input type="radio" name="assessment_1_1_4_1" value="3">
    </label>
    <label class="radio-inline assessment-rating impact-significant">
      <input type="radio" name="assessment_1_1_4_1" value="2">
    </label>
    <label class="radio-inline assessment-rating impact-moderate">
      <input type="radio" name="assessment_1_1_4_1" value="1">
    </label>
    <label class="radio-inline assessment-rating impact-little-no">
      <input type="radio" name="assessment_1_1_4_1" value="0">
    </label>
    </td>
    <td class="assessment-bar" style="width:20%">
     <label class="radio-inline assessment-rating risk-little-none">
      <input type="radio" name="assessment_1_1_4_2" value="3">
    </label>
    <label class="radio-inline assessment-rating risk-weak">
      <input type="radio" name="assessment_1_1_4_2" value="2">
    </label>
    <label class="radio-inline assessment-rating risk-partial">
      <input type="radio" name="assessment_1_1_4_2" value="1">
    </label>
    <label class="radio-inline assessment-rating risk-strong">
      <input type="radio" name="assessment_1_1_4_2" value="0">
    </label>
    </td>
    <td style="width:45%">
    <label class="radio-inline">
    Have the success-critical stakeholders been identified,  their roles and responsibilities negotiated, and their needs clearly represented by the KPPs and CONOPS?
    </label>
    </td>
     <td style="width:10%" class="exposure-column" class="exposure-column">
    <label class="item-assessment-result" name="assessment_result_1_1_4">
    0
    </label>
    </td>
    </tr>

 <tr class="assessment-item" name="assessment_1_1_5">
    <td style="width:5%">
    <label>1.1(e)</label>
    </td>
    <td class="assessment-bar" style="width:20%">
    <label class="radio-inline assessment-rating impact-critical">
      <input type="radio" name="assessment_1_1_5_1" value="3">
    </label>
    <label class="radio-inline assessment-rating impact-significant">
      <input type="radio" name="assessment_1_1_5_1" value="2">
    </label>
    <label class="radio-inline assessment-rating impact-moderate">
      <input type="radio" name="assessment_1_1_5_1" value="1">
    </label>
    <label class="radio-inline assessment-rating impact-little-no">
      <input type="radio" name="assessment_1_1_5_1" value="0">
    </label>
    </td>
    <td class="assessment-bar" style="width:20%">
     <label class="radio-inline assessment-rating risk-little-none">
      <input type="radio" name="assessment_1_1_5_2" value="3">
    </label>
    <label class="radio-inline assessment-rating risk-weak">
      <input type="radio" name="assessment_1_1_5_2" value="2">
    </label>
    <label class="radio-inline assessment-rating risk-partial">
      <input type="radio" name="assessment_1_1_5_2" value="1">
    </label>
    <label class="radio-inline assessment-rating risk-strong">
      <input type="radio" name="assessment_1_1_5_2" value="0">
    </label>
    </td>
    <td style="width:45%">
    <label class="radio-inline">
    Have issues about the fit of the system into the stakeholders' context -- acquirers, end users, administrators, interoperators, maintainers, etc. -- been adequately explored?
    </label>
    </td>
     <td style="width:10%" class="exposure-column">
    <label class="item-assessment-result" name="assessment_result_1_1_5">
    0
    </label>
    </td>
    </tr>

    </table>
    </div>
</div>
	<!--<div style="text-align: center">
	<button id="submit" type="button" class="btn btn-default">Submit</button>
	<button id="cancel" type="button" class="btn btn-primary">Cancel</button>
    </div> -->
  </form>
</div>

<script type="text/javascript">

    $(document).ready(function(){
        $("input[type='radio']").click(function(){
            var radioValue = $(this).val();
            $(this).closest(".assessment-bar").attr({set: radioValue});
            var prefix = 'assessment';
            var assessment = $(this).attr('name').substring(11,12);
            var factor = $(this).attr('name').substring(13, 14);
            var item = $(this).attr('name').substring(15,16);
            var part = $(this).attr('name').substring(17,18);
            var counterPart = prefix+'_'+assessment+'_'+factor+"_"+item+'_'+(part == 1 ? 2 : 1);
            var counterPartValue = $("input[name='"+counterPart+"']").closest(".assessment-bar").attr('set');
            if(counterPartValue === undefined){
            	return;
            }

            var impact = parseInt(radioValue);
            var risk = parseInt(counterPartValue);

            if(part == 2){
            	impact = parseInt(counterPartValue);
            	risk = parseInt(radioValue);
            }

            /*
			* color coding schema
			* 
			*
            var riskExposure = +counterPartValue + +radioValue;

            if(riskExposure > 5){
            	riskExposure = 5;
            }
            if(riskExposure < 1){
            	riskExposure = 1;
            } 
			*
			*/

			var riskExposure = 0;

            if(impact == 0){
            	if(risk == 0){
            		riskExposure = 1;
            	} else if(risk == 1){
            		riskExposure = 1;
            	} else if(risk == 2){
            		riskExposure = 1;
            	} else if(risk == 3){
            		riskExposure = 2;
            	} else {
            		return;
            	}

            }
            else if(impact == 1){
            	if(risk == 0){
            		riskExposure = 1;
            	} else if(risk == 1){
            		riskExposure = 2;
            	} else if(risk == 2){
            		riskExposure = 3;
            	} else if(risk == 3){
            		riskExposure = 4;
            	} else {
            		return;
            	}

            }
            else if(impact == 2){
            	if(risk == 0){
            		riskExposure = 1;
            	} else if(risk == 1){
            		riskExposure = 3;
            	} else if(risk == 2){
            		riskExposure = 4;
            	} else if(risk == 3){
            		riskExposure = 5;
            	} else {
            		return;
            	}

            }
            else if(impact == 3){
            	if(risk == 0){
            		riskExposure = 2;
            	} else if(risk == 1){
            		riskExposure = 4;
            	} else if(risk == 2){
            		riskExposure = 5;
            	} else if(risk == 3){
            		riskExposure = 5;
            	} else {
            		return;
            	}

            }
            else {
            	return;
            }


             $(this).closest(".assessment-item").attr({assessment: riskExposure});
             var itemAssessmentResult = $("label[name='assessment_result_"+assessment+"_"+factor+"_"+item+"']");

             switch (riskExposure) {
           		case 1:
           			itemAssessmentResult.css('background-color', '#00b050');
           			itemAssessmentResult.css('visibility', 'visible');
           			itemAssessmentResult.html('1');
           		break;
           		case 2:
           			itemAssessmentResult.css('background-color', '#99ff33');
           			itemAssessmentResult.css('visibility', 'visible');
           			itemAssessmentResult.html('2');
           		break;
           		case 3:
           			itemAssessmentResult.css('background-color', '#ffff00');
           			itemAssessmentResult.css('visibility', 'visible');
           			itemAssessmentResult.html('3');
           		break;
           		case 4:
           			itemAssessmentResult.css('background-color', '#ffc000');
           			itemAssessmentResult.css('visibility', 'visible');
           			itemAssessmentResult.html('4');
           		break;
           		case 5:
           			itemAssessmentResult.css('background-color', '#ff0000');
           			itemAssessmentResult.css('visibility', 'visible');
           			itemAssessmentResult.html('5');
           		break;
           		default:
           			itemAssessmentResult.css('background-color', 'transparent');
           			itemAssessmentResult.css('visibility', 'visible');
           			itemAssessmentResult.html('0');
           		break;
           	}

            var i = 1;
            var highestAssessment = -1;

            while ($("tr[name='"+prefix+"_"+assessment+"_"+factor+"_"+i+"']").length != 0){
            	var riskExposure = $("tr[name='"+prefix+"_"+assessment+"_"+factor+"_"+i+"']").attr('assessment');
            	if(riskExposure !== undefined && Number(riskExposure) > Number(highestAssessment)){
            		highestAssessment = riskExposure;
            	}
            	i ++;
            }

            var assessmentResult = $("label[name='assessment_result_"+assessment+"_"+factor+"']");
           
           	switch (highestAssessment) {
           		case '1':
           			assessmentResult.css('background-color', '#00b050');
           			assessmentResult.html('1');
           		break;
           		case '2':
           			assessmentResult.css('background-color', '#99ff33');
           			assessmentResult.html('2');
           		break;
           		case '3':
           			assessmentResult.css('background-color', '#ffff00');
           			assessmentResult.html('3');
           		break;
           		case '4':
           			assessmentResult.css('background-color', '#ffc000');
           			assessmentResult.html('4');
           		break;
           		case '5':
           			assessmentResult.css('background-color', '#ff0000');
           			assessmentResult.html('5');
           		break;
           		default:
           			assessmentResult.css('background-color', 'transparent');
           			assessmentResult.html('0');
           		break;
           	}
        });
        
    });


$('#submit').click(function(){

})

$('#cancel').click(function(){
  
})

$('#reset').click(function(){
  location.reload();
})

</script>

</body>
</html>
